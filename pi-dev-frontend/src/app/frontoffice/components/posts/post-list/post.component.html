<div class="social-feed">
  <!-- Message si aucun post -->
  <div *ngIf="posts.length === 0" class="no-posts">
    <img src="assets/images/empty-feed.svg" alt="Aucun post" class="empty-illustration">
    <h3>Votre fil d'actualité est vide</h3>
    <p>Soyez le premier à partager quelque chose !</p>
  </div>

  <!-- Formulaire de création de post -->
  <div class="create-post-card">
    <app-add-post (postAdded)="loadPosts()"></app-add-post>
  </div>

  <!-- Liste des posts -->
  <div class="post-list">
    <div *ngFor="let post of posts" class="post-card">
      <!-- En-tête du post -->
      <div class="post-header">
        <div class="user-info">
          <img src="assets/med.jpg" alt="Utilisateur" class="user-avatar">
          <div>
            <div class="post-time">{{post.createdAt | date:'dd MMM yyyy à HH:mm'}}</div>
          </div>
        </div>
        <button *ngIf="post.idPost" 
        (click)="deletePost(post.idPost); $event.stopPropagation()" 
        class="delete-btn">
  <i class="fas fa-trash"></i> Supprimer
</button>
      </div>
      
      

      <!-- Contenu du post -->
      <div class="post-content">
        <h3>{{ post.title || 'Publication sans titre' }}</h3>
        <p>{{ post.content }}</p>
        
        <!-- Image statique -->
        <div *ngIf="post.mediaUrl && isImage(post.mediaUrl)" class="static-image-container">
          <img [src]="post.mediaUrl"
               alt="Contenu média"
               class="post-image-static"
               (error)="handleImageError($event)">
        </div>
      </div>
      <app-add-reaction [post]="post"></app-add-reaction>

      <!-- Section commentaires au DÉBUT du post -->
      <div class="comments-section" *ngIf="post.idPost">
        <app-add-comment [postId]="post.idPost" (commentAdded)="loadPosts()"></app-add-comment>
      </div>

      <!-- Section commentaires au DÉBUT du post -->
      <div class="comments-section" *ngIf="post.idPost">
        <app-list-comment [postId]="post.idPost" (commentAdded)="loadPosts()"></app-list-comment>
      </div>


      <!-- Actions -->

    </div>
  </div>
</div>
