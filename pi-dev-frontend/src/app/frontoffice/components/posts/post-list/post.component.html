
<p *ngIf="posts.length === 0">Aucun post Ã  afficher.</p>

<div class="card-container">
  <div class="post-card" *ngFor="let post of posts">
    <div class="post-content" (click)="viewPost(post.idPost)">
      <img *ngIf="post.mediaUrl && isImage(post.mediaUrl)" 
           [src]="getFullMediaUrl(post.mediaUrl)" 
           alt="Post image"
           class="post-image"
           (error)="handleImageError($event)">
      
      <h2>{{ post.title || 'Sans titre' }}</h2>
      <p>{{ (post.content || '').slice(0, 100) }}{{ (post.content?.length || 0) > 100 ? '...' : '' }}</p>
      <small>{{ post.createdAt | date:'medium' }}</small>
    </div>

    <div class="post-actions">
      <div class="action-buttons">
        <button (click)="editPost(post.idPost); $event.stopPropagation()"
                class="btn-edit"
                *ngIf="post.idPost">
          Modifier
        </button>
        
        <button (click)="deletePost(post.idPost); $event.stopPropagation()"
                class="btn-delete"
                *ngIf="post.idPost">
          Supprimer
        </button>
      </div>
      
      <div class="reactions-container" *ngIf="post.idPost">
        <button class="reaction-btn" 
                *ngFor="let reaction of reactions" 
                (click)="$event.stopPropagation(); addReaction(reaction.type, post.idPost)"
                [title]="reaction.label">
          <span class="emoji">{{ reaction.emoji }}</span>
          <span class="reaction-text">{{ reaction.label }}</span>
          <span class="count">{{ getReactionCount(post, reaction.type) }}</span>
        </button>
      </div>
    </div>
  </div>
</div>
<section class="contact-area bg-gray section-padding-100-0">
  <div class="container">
    <div class="row align-items-end">

      <!-- Contact Content -->
      <div class="col-12 col-lg-7">
        <div class="contact-content section-padding-0-100">
          <!-- Section Heading -->
          <div class="section-heading">
            <p>BECOME a FARMER</p>
            <h2><span>Ajouter un Post</span> </h2>
            <img src="assets/img/core-img/decor.png" alt="">
          </div>
          <!-- Contact Form Area -->
          <app-add-post (postAdded)="loadPosts()"></app-add-post>
        </div>
      </div>

      <!-- Contact Maps -->
      <div class="col-lg-5">
        <div class="consaltant-thumbnail text-center">
          <img src="assets/img/bg-img/25.png" alt="">
        </div>
      </div>
    </div>
  </div>
</section>

